import { readRepID } from "./repid.js";
import forEach from "mocha-each";
import { expect } from "chai";

describe("RepID", () => {
    // hexbuffer from v1.0.6 results, expectedResult from Access UI
    forEach([
        [
            [0x9c, 0xd8, 0x5c, 0xf7, 0xdb, 0xf0, 0x9f, 0x40, 0xb6, 0x47, 0xf5, 0x00, 0xa8, 0x83, 0x16, 0xf0],
            "F75CD89C-F0DB-409F-B647-F500A88316F0",
        ],
        [
            [0x58, 0xfe, 0x2e, 0x52, 0xea, 0x2f, 0xa3, 0x45, 0x9b, 0x66, 0x07, 0x39, 0x2a, 0x40, 0x61, 0xdf],
            "522EFE58-2FEA-45A3-9B66-07392A4061DF",
        ],
        [
            [0x10, 0x2c, 0x51, 0x78, 0x61, 0x50, 0x00, 0x4e, 0x8c, 0x8f, 0x42, 0xab, 0xda, 0xc6, 0x8e, 0x7e],
            "78512C10-5061-4E00-8C8F-42ABDAC68E7E",
        ],
        [
            [0x46, 0xaf, 0xae, 0xf5, 0xfb, 0xe0, 0x29, 0x47, 0xa0, 0xec, 0xa8, 0x7e, 0x1a, 0x11, 0x94, 0x55],
            "F5AEAF46-E0FB-4729-A0EC-A87E1A119455",
        ],
        [
            [0x45, 0xbe, 0xf7, 0xda, 0xc9, 0xce, 0xfd, 0x43, 0x83, 0x4e, 0x13, 0x25, 0xb6, 0x1a, 0xcf, 0xca],
            "DAF7BE45-CEC9-43FD-834E-1325B61ACFCA",
        ],
        [
            [0x99, 0xbb, 0xf7, 0x5c, 0x9e, 0x3f, 0x54, 0x49, 0xa5, 0x09, 0x5f, 0x96, 0xa2, 0x2b, 0x1d, 0x70],
            "5CF7BB99-3F9E-4954-A509-5F96A22B1D70",
        ],
    ]).it("reads numeric value", (hexbuffer, expectedResult) => {
        const result = readRepID(Buffer.from(hexbuffer));
        expect(result).to.eq((expectedResult as string).toLowerCase());
    });
});
